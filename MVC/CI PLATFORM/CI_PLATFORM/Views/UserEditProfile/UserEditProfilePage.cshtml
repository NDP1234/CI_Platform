@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    Layout = null;
}
@using CI_Platform.Entities.Models.VM;
@model UserEditProfileViewModel;
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Edit Profile Page</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.4/font/bootstrap-icons.css">
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="~/css/uep.css">
</head>
<body>
    <div class="container-fluid">
        <nav class="navbar navbar-expand-lg navbar-light d-none d-md-block">
            <div class="container">
                <button class="navbar-toggler bg-light " type="button" data-bs-toggle="collapse"
                        data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                        aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav me-auto mb-2 mb-lg-0 mrg-start">

                        <li class="nav-item ">
                            <a class="nav-link text-dark" asp-action="Story_Listing_Page" asp-controller="StoryRelated">Stories</a>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle text-dark" href="#" role="button"
                               data-bs-toggle="dropdown" aria-expanded="false">
                                Policy
                            </a>
                            <ul class="dropdown-menu text-center">
                                <li class="mx-auto"><a asp-action="PrivacyPolicyPage" asp-controller="UserEditProfile" class="text-decoration-none text-dark"> Privacy Policy</a></li>
                                
                            </ul>
                        </li>

                    </ul>
                    <form class="d-flex" role="search">

                        <div class="dropdown">
                            <a class="btn  dropdown-toggle p-0" href="#" role="button" id="dropdownMenuLink"
                               data-bs-toggle="dropdown" aria-expanded="false">
                                <img src="@ViewBag.UserDetails.Avatar" alt="" style="border-radius: 50%;" height="30px"
                                     width="30px">
                                <span>@ViewBag.UserDetails.FirstName @ViewBag.UserDetails.LastName</span>
                            </a>


                            <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                                @if(@ViewBag.UserDetails.Role == "admin")
                                {
                                    <li><a class="dropdown-item" asp-action="AdminDashBoard" asp-controller="Admin">Dashboard</a></li>
                                }
                                <li><a class="dropdown-item" asp-action="UserEditProfilePage" asp-controller="UserEditProfile">My Account</a></li>
                                <li><a class="dropdown-item" asp-action="VolunteeringTimesheet" asp-controller="Timesheet">Volunteering Timesheet</a></li>
                                <li><a class="dropdown-item" asp-action="Logout" asp-controller="Authentication">Logout </a></li>
                            </ul>
                        </div>
                    </form>
                </div>
            </div>
        </nav>

        <!-- ////////////////////////////////// -->
        <div class="first-nav d-md-none ">
            <div id="mySidebar1" class="sidebar d-inline">
                <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">×</a>
                <a href="#">
                    Stories
                </a>

                <a href="#">
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle " href="#" role="button" data-bs-toggle="dropdown"
                           aria-expanded="false">
                            Policy
                        </a>
                        <ul class="dropdown-menu ">
                            <li><a class="dropdown-item " href="#">Policy-1</a></li>
                            <li><a class="dropdown-item" href="#">Policy-2</a></li>
                            <li>
                                <hr class="dropdown-divider">
                            </li>
                            <li><a class="dropdown-item" href="#">Something else </a></li>
                        </ul>
                    </li>
                </a>
            </div>
            <div id="main1" class="d-flex justify-content-between m-2">
                <button class="openbtn " onclick="openNav()">☰ </button>
                <img src="/Images/volunteer1.png" class="rounded-pill  " height="40px" width="40px" alt="">
            </div>
        </div>
        <!-- //////////////////////////////// -->
        @if (TempData["Message"] != null)
        {
            <div class="alert alert-success" id="alert-message">
                @TempData["Message"]
            </div>
        }
        
        <hr class="hr" />
        <div class="container">
            <form method="post" class="row g-3 needs-validation userprofileValidation" novalidate>
                <div class="row">

                    <div class="col-xl-3 col-md-12 ">

                        <div class="border p-2  p-3 mb-5 shadow">


                            <input type="file" id="fileInput" style="display:none;" onchange="previewImage()">

                            <img class="rounded-circle mx-auto d-block w-50 h-50" id="userProfile" src="" alt="profile picture" onclick="selectFile()">
                            <input type="hidden" id="avatarInput" asp-for="Avatar" />

                            <h5 class="text-center" id="UserName" data-user-id="@ViewBag.UserDetails.UserId"></h5>
                            <div class="changePwd text-center">

                                <button type="button" class="btn" data-bs-toggle="modal" data-bs-target="#exampleModal">
                                    Change Password
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-9 col-md-12">


                        @*<form method="post">*@
                        <div class="row">
                            <div class="col">
                                <span class="fs-4 border-dark border-bottom " style="padding-bottom: 1px;">Basic Information</span>
                                <hr class="hr mt-0" />
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-12 col-md-12 col-xl-6">
                                <div class="mb-3">
                                    <label for="nameInput" class="form-label ">Name*</label>
                                    <input type="text" class="form-control " id="nameInput" asp-for="FirstName" placeholder="Enter your name" required>
                                    <div class="invalid-feedback">
                                        Please enter your first name.
                                    </div>
                                </div>

                            </div>
                            <div class="col-12 col-md-12 col-xl-6">
                                <div class="mb-3">
                                    <label for="surnameInput" class="form-label ">Surname*</label>
                                    <input type="text" class="form-control " id="surnameInput" asp-for="LastName" placeholder="Enter your surname" required>
                                    <div class="invalid-feedback">
                                        Please enter your last name.
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row mb-3 ">
                            <div class="col-12 col-md-12 col-xl-6">
                                <div class="mb-3">
                                    <label for="EmployeeIdInput" class="form-label ">Employee ID</label>
                                    <input type="text" class="form-control " id="EmployeeIdInput" asp-for="EmployeeId" placeholder="Enter your employee id">
                                </div>
                            </div>
                            <div class="col-12 col-md-12 col-xl-6">
                                <div class="mb-3">
                                    <label for="ManagerInput" class="form-label ">Manager</label>
                                    <input type="text" class="form-control " id="ManagerInput" placeholder="Badal Patel">
                                </div>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-12 col-md-12 col-xl-6">
                                <div class="mb-3">
                                    <label for="TitleInput" class="form-label ">Title</label>
                                    <input type="text" class="form-control " id="TitleInput" asp-for="Title" placeholder="Enter title here">
                                </div>
                            </div>
                            <div class="col-12 col-md-12 col-xl-6">
                                <div class="mb-3">
                                    <label for="DepartmentInput" class="form-label ">Department</label>
                                    <input type="text" class="form-control " id="DepartmentInput" asp-for="Department" placeholder="Enter your department here">
                                </div>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col">
                                <div class="mb-3">
                                    <label for="MyProfileTextarea" class="form-label">My Profile*</label>
                                    <textarea class="form-control" id="MyProfileTextarea" rows="3" asp-for="ProfileText" placeholder="Enter your comments..." required></textarea>
                                    <div class="invalid-feedback">
                                        Please enter your profile information.
                                    </div>
                                </div>

                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col">
                                <div class="mb-3">
                                    <label for="WhyIVolunteerTextarea" class="form-label">Why I Volunteer?</label>
                                    <textarea class="form-control" id="WhyIVolunteerTextarea" rows="3" asp-for="WhyIVolunteer" placeholder="Enter your comments..."></textarea>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col ">
                                <span class="fs-4 border-dark border-bottom " style="padding-bottom: 1px;">Address Information</span>
                                <hr class="hr mt-0" />
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-12 col-md-12 col-xl-6">
                                <div class="mb-3">
                                    <label for="cityInput" class="form-label">City</label>
                                    @{
                                        var citydetails = @Model.cities.FirstOrDefault(c => c.CityId == @ViewBag.UserDetails.CityId).CityId;
                                    }
                                    <select class="form-select" id="cityInput" value="citydetails" asp-for="CityId" aria-label="Default select example" required>
                                       
                                       
                                    </select>
                                </div>
                            </div>
                            <div class="col-12 col-md-12 col-xl-6">
                                <div class="mb-3">
                                    <label for="CountryInput" class="form-label">Country*</label>
                                    @{
                                        var countrydetails = @Model.countries.FirstOrDefault(c => c.CountryId == @ViewBag.UserDetails.CountryId);
                                    }
                                    <select class="form-select" id="CountryInput" asp-for="CountryId" aria-label="Default select example" required>
                                        
                                        <option value="@countrydetails.CountryId" selected>@countrydetails.Name</option>
                                        @foreach (var item in Model.countries.Where(c => c.CountryId != @ViewBag.UserDetails.CountryId))
                                        {
                                            <option value="@item.CountryId">@item.Name</option>
                                        }
                                    </select>
                                    <div class="invalid-feedback">
                                        Please select a country.
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col">
                                <span class="fs-4 border-dark border-bottom " style="padding-bottom: 1px;">Professional Information</span>
                                <hr class="hr mt-0" />
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-12 col-md-12 col-xl-6">
                                <div class="mb-3">
                                    <label for="AvailablityInput" class="form-label">Availablity</label>
                                    <select class="form-select" id="AvailablityInput" aria-label="Default select example">
                                        <option selected>Select your Availablity</option>
                                        <option value="1">daily</option>
                                        <option value="2">weekly</option>
                                        <option value="3" selected>week-end</option>
                                        <option value="3">monthly</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-12 col-md-12 col-xl-6">
                                <div class="mb-3">
                                    <label for="LinkedInInput" class="form-label">LinkedIn</label>
                                    <input type="text" class="form-control " id="LinkedInInput" asp-for="LinkedInUrl" placeholder="Enter linkedIn URL" >
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col">
                                <span class="fs-4 border-dark border-bottom " style="padding-bottom: 1px;">My Skills</span>
                                <hr class="hr mt-0" />
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col skilllist">
                                <input type="hidden" asp-for="skillIds" value="@Model.skillIds" id="myskills" />
                                <ul class="list-group">
                                </ul>
                            </div>
                        </div>
                       
                        <button type="button" class="btn btn-outline-dark rounded-pill p-2" data-bs-toggle="modal" style="width:150px" data-bs-target="#skillmodal">
                            Add Skills
                        </button>
                        <div class="row mt-5 mb-5">
                            <div class="col">
                                <button class="btn btn-primary SaveOrSubmitBtn float-end mx-2 " value="save" type="submit">Save</button>
                            </div>
                        </div>
                        

                    </div>



            </form>
        </div>
        <!-- Modal for change password-->
        <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <form method="post" asp-action="ChangePassword" asp-controller="UserEditProfile">

                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">change Password</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <div class="mb-3">

                                <input type="password" class="form-control " id="oldpwd" asp-for="OldPassword" placeholder="Enter old password" required>
                              
                            </div>
                            <div class="mb-3">

                                <input type="password" minlength="8" class="form-control " id="newpwd" asp-for="NewPassword" placeholder="Enter new password" required>
                                 
                            </div>
                            <div class="mb-3">

                                <input type="password" minlength="8" class="form-control " id="confirmpwd" asp-for="ConfirmPassword" placeholder="Enter confrim password" required>
                                 
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                            <button type="submit" class="btn btn-primary">Change Password</button>
                        </div>
                    </div>
                </div>
            </form>
        </div>

        <!-- Modal for add skills -->
        <div class="modal fade" id="skillmodal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Add your Skills</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-md-5">
                                <div class="skillcontainer">
                                    @foreach (var item in Model.Skills)
                                    {

                                        <div class="border my-2 text-center" value="@item.SkillId">@item.SkillName</div>

                                    }

                                </div>
                            </div>
                            <div class="col-md-2  align-self-center">
                                <div class="row my-1 ">
                                    <button class="bg-white " id="rightArrow"> <i class="bi bi-chevron-right"></i> </button>
                                </div>
                                <div class="row my-1">
                                    <button class="bg-white" id="leftArrow"> <i class="bi bi-chevron-left"></i> </button>
                                </div>
                            </div>
                            <div class="col-md-5">
                                <div class="selectedskillcontainer">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer d-flex justify-content-start">
                        <button type="button" class="btn cancelBtn text-center" data-bs-dismiss="modal">Cancel</button>
                        <button type="button" class="btn SaveBtn text-center">Save </button>
                    </div>
                </div>
            </div>
        </div>

    </div>
    <hr class="hr" />
    <!-- Footer (Privacy Policy) -->
    <div class="container">
        <div class=" mt-3 mb-5 d-inline">
            <a asp-action="PrivacyPolicyPage" asp-controller="UserEditProfile" class="text-decoration-none text-dark"> Privacy Policy</a>
        </div>
        <div class=" mt-3 mb-5 d-inline">
           
            <button type="button" class="btn " data-bs-toggle="modal" data-bs-target="#ContactUsModal"> Contact Us </button>
        </div>
        <div class="modal fade" id="ContactUsModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <form class="row g-3 needs-validation contactUsvalidation" novalidate>

                <div class="modal-dialog w-75">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Contact Us</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <div class="mb-3">
                                <label class="mb-1" for="username">Name*</label>
                                <input type="text" disabled class="form-control" value="@ViewBag.UserDetails.FirstName @ViewBag.UserDetails.LastName" id="username" placeholder="" required>


                            </div>
                            <div class="mb-3">
                                <label class="mb-1" for="useremail">Email Address*</label>
                                <input type="email" disabled class="form-control" value="@ViewBag.UserDetails.Email" id="useremail" placeholder="" required>


                            </div>
                            <div class="mb-3">
                                <label class="mb-1" for="subject">Subject*</label>
                                <input type="text" class="form-control " id="subjectText" placeholder="Enter your Subject" required>
                                <div class="invalid-feedback">
                                    Please enter the subject details.
                                </div>
                            </div>
                            <div class="mb-3">
                                <label class="mb-1" for="message">Message*</label>
                                <textarea class="form-control" id="messageText" rows="3" placeholder="Enter your Message" required></textarea>
                                <div class="invalid-feedback">
                                    Please enter the message details.
                                </div>
                            </div>
                            <div class="alert alert-success d-none" id="successDiv" role="alert">
                                request has been successfully sent.....!
                            </div>
                            <div class="alert alert-danger d-none" id="errorDiv" role="alert">
                                request has been fail to send.....!
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn  cancelBtn2 " data-bs-dismiss="modal">Cancel</button>
                            <button type="button" class="btn SaveBtn2" id="SaveBtn2">Save</button>
                        </div>
                    </div>
                </div>
            </form>
        </div>

    </div>
    </div>

    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/UserEditProfile.js" asp-append-version="true"></script>
    
</body>
</html>